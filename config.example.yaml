library:
  music_directory: E:/MUSIC  # Set to your music library path
  database_path: data/metadata.db

lastfm:  # Optional: only used for listening history now
  api_key: ""
  username: ""
  history_days: 90

openai:
  api_key: YOUR_OPENAI_API_KEY
  model: gpt-4o-mini

playlists:
  count: 8
  tracks_per_playlist: 30
  history_days: 14
  seed_count: 5
  similar_per_seed: 20
  name_prefix: 'Auto:'
  max_age_days: 14
  export_m3u: true
  m3u_export_path: E:/PLAYLISTS
  cache_expiry_days: 30
  name_format: artists
  recently_played_filter:
    enabled: true
    lookback_days: 30
    min_playcount_threshold: 0
  min_duration_minutes: 90
  min_track_duration_seconds: 46
  max_track_duration_seconds: 720
  max_tracks_per_artist: 4
  artist_window_size: 8
  max_artist_per_window: 1
  min_seed_artist_ratio: 0.125
  pipeline: ds  # legacy | ds
  ds_pipeline:
    artifact_path: experiments/genre_similarity_lab/artifacts/data_matrices_step1.npz
    mode: dynamic
    random_seed: 0
    enable_logging: true
  sonic:
    sim_variant: raw  # raw | centered | z | z_clip | whiten_pca (opt-in; raw remains default)
  genre_similarity:
    enabled: true
    weight: 0.33
    sonic_weight: 0.67
    min_genre_similarity: 0.2
    method: ensemble
    similarity_file: data/genre_similarity.yaml
    use_artist_tags: true
    broad_filters:
      - 50s
      - 60s
      - 70s
      - 80s
      - 90s
      - 00s
      - 10s
      - '1950'
      - '1960'
      - '1970'
      - '1980'
      - '1990'
      - '2000'
      - '2010'
      - '2020'
      - 2000s
      - 2010s
      - 2020s
      - rock
      - pop
      - indie
      - alternative
      - experimental
      - instrumental
      - ambient
      - electronic
      - underground
      - classic
      - modern
      - contemporary
      - male vocalists
      - female vocalists
      - male vocalist
      - female vocalist
      - british
      - american
      - canadian
      - english
      - uk
      - usa
      - nyc
      - london
      - lo-fi
      - lofi
      - chillout
      - chill
      - beautiful
      - melancholy
      - sad
      - happy
      - love
      - mellow
      - catchy
      - awesome
      - cool
      - good
      - great
      - seen live
      - favorites
      - favourite
      - my music
      - owned
      - liked
      - to buy
      - unknown
      - various
      - other
      - misc
      - soundtrack
      - ost
      - cover
      - covers
      - remix
      - remixes
      - live
      - bootleg
      - demo
      - reissue
      - compilation
  similarity:
    min_threshold: 0.5
    artist_direct_match: 0.9
    artist_shared_base: 0.4
    artist_shared_increment: 0.05
    artist_shared_max: 0.7
  limits:
    similar_tracks: 50
    similar_artists: 30
    extension_base: 10
    extension_increment: 20
  duration_match:
    enabled: true
    weight: 0.35          # influence of duration preference (multiplicative exponent)
    window_frac: 0.25     # +/-25% is treated as near-neutral
    falloff: 0.6          # steeper/smoother tail outside window
    min_target_seconds: 40
  dedupe:
    title:
      enabled: true       # Enable fuzzy title deduplication
      threshold: 92       # Fuzzy match threshold (0-100, higher = stricter)
      mode: loose         # 'strict' or 'loose' (loose strips version tags like Remastered, Live, etc.)
      short_title_min_len: 6  # Titles shorter than this require exact match

logging:
  level: DEBUG
  file: playlist_generator.log
